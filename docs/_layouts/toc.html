<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  {% seo %}
  
  <link rel="stylesheet" href="{{ '/assets/main.css' | relative_url }}">
  <link rel="alternate" type="application/rss+xml" title="{{ site.title | escape }}" href="{{ '/feed.xml' | relative_url }}">
  
  <!-- Custom CSS for sidebar TOC -->
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      line-height: 1.6;
      margin: 0;
      padding: 0;
    }
    
    .site-header {
      border-top: 5px solid #424242;
      border-bottom: 1px solid #e8e8e8;
      background-color: #fdfdfd;
      padding: 15px 0;
    }
    
    .header-wrapper {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    .site-title {
      font-size: 26px;
      font-weight: 300;
      color: #424242;
      text-decoration: none;
    }
    
    .main-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      display: flex;
      gap: 30px;
    }
    
    .sidebar {
      width: 250px;
      position: sticky;
      top: 20px;
      height: fit-content;
      background: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 5px;
      padding: 20px;
      flex-shrink: 0;
    }
    
    .sidebar h3 {
      margin-top: 0;
      margin-bottom: 15px;
      font-size: 18px;
      color: #424242;
      border-bottom: 2px solid #e9ecef;
      padding-bottom: 5px;
    }
    
    .toc {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    
    .toc li {
      margin-bottom: 8px;
    }
    
    .toc a {
      color: #666;
      text-decoration: none;
      font-size: 14px;
      line-height: 1.4;
      display: block;
      padding: 4px 0;
      border-left: 3px solid transparent;
      padding-left: 10px;
    }
    
    .toc a:hover {
      color: #424242;
      border-left-color: #424242;
    }
    
    .toc .toc-h2 {
      font-weight: 600;
    }
    
    .toc .toc-h3 {
      padding-left: 20px;
      font-size: 13px;
    }
    
    .content {
      flex: 1;
      min-width: 0;
    }
    
    .content h1 {
      margin-top: 0;
      color: #424242;
      font-weight: 400;
    }
    
    .content h2 {
      color: #424242;
      margin-top: 40px;
      margin-bottom: 15px;
      border-bottom: 1px solid #e8e8e8;
      padding-bottom: 5px;
    }
    
    .content h3 {
      color: #424242;
      margin-top: 30px;
      margin-bottom: 10px;
    }
    
    .content table {
      border-collapse: collapse;
      width: 100%;
      margin: 20px 0;
    }
    
    .content th,
    .content td {
      border: 1px solid #e8e8e8;
      padding: 8px 12px;
      text-align: left;
    }
    
    .content th {
      background-color: #f8f9fa;
      font-weight: 600;
    }
    
    .content pre {
      background: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 4px;
      padding: 15px;
      overflow-x: auto;
      font-size: 14px;
    }
    
    .content code {
      background: #f8f9fa;
      padding: 2px 4px;
      border-radius: 3px;
      font-size: 14px;
    }
    
    .content pre code {
      background: none;
      padding: 0;
    }
    
    @media (max-width: 768px) {
      .main-container {
        flex-direction: column;
        padding: 10px;
      }
      
      .sidebar {
        width: 100%;
        position: static;
        order: 2;
        margin-top: 20px;
      }
    }
  </style>
</head>

<body>
  <header class="site-header">
    <div class="header-wrapper">
      <a class="site-title" href="{{ '/' | relative_url }}">{{ site.title | escape }}</a>
    </div>
  </header>

  <div class="main-container">
    <nav class="sidebar">
      <h3>Table of Contents</h3>
      <ul class="toc">
        <li><a href="#system-overview" class="toc-h2">System Overview</a></li>
        <li><a href="#data-products" class="toc-h2">Data Products</a>
          <ul>
            <li><a href="#daily-station-historical-data" class="toc-h3">Daily Station Historical Data</a></li>
            <li><a href="#daily-municipal-extended-data" class="toc-h3">Daily Municipal Extended Data</a></li>
            <li><a href="#hourly-station-ongoing-data" class="toc-h3">Hourly Station Ongoing Data</a></li>
          </ul>
        </li>
        <li><a href="#data-flow-architecture" class="toc-h2">Data Flow Architecture</a></li>
        <li><a href="#technical-implementation" class="toc-h2">Technical Implementation</a>
          <ul>
            <li><a href="#performance-optimization" class="toc-h3">Performance Optimization</a></li>
            <li><a href="#quality-control" class="toc-h3">Quality Control</a></li>
            <li><a href="#data-standardization" class="toc-h3">Data Standardization</a></li>
            <li><a href="#gap-management" class="toc-h3">Gap Management</a></li>
          </ul>
        </li>
        <li><a href="#installation-and-setup" class="toc-h2">Installation and Setup</a>
          <ul>
            <li><a href="#prerequisites" class="toc-h3">Prerequisites</a></li>
            <li><a href="#configuration" class="toc-h3">Configuration</a></li>
            <li><a href="#automation-setup" class="toc-h3">Automation Setup</a></li>
          </ul>
        </li>
        <li><a href="#usage" class="toc-h2">Usage</a>
          <ul>
            <li><a href="#manual-data-collection" class="toc-h3">Manual Data Collection</a></li>
            <li><a href="#monitoring" class="toc-h3">Monitoring</a></li>
          </ul>
        </li>
        <li><a href="#file-organization" class="toc-h2">File Organization</a></li>
        <li><a href="#variable-reference" class="toc-h2">Variable Reference</a>
          <ul>
            <li><a href="#original-aemet-to-standardized-mapping" class="toc-h3">Original AEMET to Standardized Mapping</a></li>
            <li><a href="#municipality-code-information" class="toc-h3">Municipality Code Information</a></li>
          </ul>
        </li>
        <li><a href="#performance-metrics" class="toc-h2">Performance Metrics</a>
          <ul>
            <li><a href="#collection-times" class="toc-h3">Collection Times</a></li>
            <li><a href="#data-volumes" class="toc-h3">Data Volumes</a></li>
          </ul>
        </li>
        <li><a href="#support" class="toc-h2">Support</a></li>
        <li><a href="#license" class="toc-h2">License</a></li>
      </ul>
    </nav>

    <main class="content">
      {{ content }}
    </main>
  </div>

  <!-- Smooth scrolling for anchor links -->
  <script>
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });
  </script>
</body>
</html>
