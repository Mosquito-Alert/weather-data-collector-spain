=== SLURM Job Information ===
Job ID: 17923
Job Name: weather_four_datasets
Node: node6
Started at: Wed Aug 27 20:38:30 CEST 2025

Loading modules...
R version: R version 4.4.2 (2024-10-31) -- "Pile of Leaves"
GDAL version: 3.10.0

Starting four-dataset weather collection...
Approach: Original variable names, separate data sources
Expected completion time: 2-6 hours depending on data volumes

- The project is out-of-sync -- use `renv::status()` for details.
========================================
FOUR-DATASET WEATHER COLLECTION
========================================
Approach: Separate datasets, original variable names
Started at: 2025-08-27 20:38:56 

=== DATASET 1: HISTORICAL DAILY STATIONS ===
Source: AEMET historical climatological API (2013 to T-4 days)
Output: daily_stations_historical.csv.gz
=== Daily Stations Historical Aggregation ===
Source: AEMET historical climatological API
Period: 2013 to T-4 days (as far as historical API provides)
Variables: Original AEMET names preserved

Using historical file: daily_station_historical.csv.gz 
Loaded 1056468 historical records
Date range: Inf to -Inf 
Stations: 904 
Variables: date, indicativo, ta, tamax, tamin, hr, prec, vv, pres 
❌ Dataset 1 failed: Historical data missing 'fecha' column 

=== DATASET 2: CURRENT DAILY STATIONS ===
Source: Hourly API aggregated to daily (T-4 days to yesterday)
Output: daily_stations_current.csv.gz
=== Daily Stations Current Aggregation ===
Source: Hourly station data aggregated to daily
Period: Gap between historical data end and yesterday
Variables: Original AEMET names preserved

Loading hourly data from: hourly_station_ongoing.csv.gz 
Hourly data shape: 62641 rows, 5 columns
Columns: station_id, datetime, date, variable_type, value 
❌ Dataset 2 failed: No station ID column found in hourly data 

=== DATASET 3: HOURLY STATIONS ===
Source: AEMET hourly observations API
Output: hourly_station_ongoing.csv.gz
=== Hourly Station Ongoing Collection ===
Source: AEMET hourly observations API
Purpose: Most recent hourly weather observations
Variables: Original AEMET names preserved

Existing hourly file found, age: 15.8 hours
Collecting new hourly data...
<curl_error_recv_error in curl_fetch_memory(paste0("https://opendata.aemet.es/opendata/api/observacion/convencional/todas"),     handle = h): Failure when receiving data from the peer [opendata.aemet.es]:
OpenSSL SSL_read: SSL_ERROR_SYSCALL, errno 0>
<curl_error_recv_error in curl_fetch_memory(paste0("https://opendata.aemet.es/opendata/api/observacion/convencional/todas"),     handle = h): Failure when receiving data from the peer [opendata.aemet.es]:
OpenSSL SSL_read: SSL_ERROR_SYSCALL, errno 0>
<curl_error_recv_error in curl_fetch_memory(paste0("https://opendata.aemet.es/opendata/api/observacion/convencional/todas"),     handle = h): Failure when receiving data from the peer [opendata.aemet.es]:
OpenSSL SSL_read: SSL_ERROR_SYSCALL, errno 0>
<curl_error_recv_error in curl_fetch_memory(paste0("https://opendata.aemet.es/opendata/api/observacion/convencional/todas"),     handle = h): Failure when receiving data from the peer [opendata.aemet.es]:
OpenSSL SSL_read: SSL_ERROR_SYSCALL, errno 0>
<curl_error_recv_error in curl_fetch_memory(paste0("https://opendata.aemet.es/opendata/api/observacion/convencional/todas"),     handle = h): Failure when receiving data from the peer [opendata.aemet.es]:
OpenSSL SSL_read: SSL_ERROR_SYSCALL, errno 0>
<curl_error_recv_error in curl_fetch_memory(paste0("https://opendata.aemet.es/opendata/api/observacion/convencional/todas"),     handle = h): Failure when receiving data from the peer [opendata.aemet.es]:
OpenSSL SSL_read: SSL_ERROR_SYSCALL, errno 0>
[1] "No new data retrieved. Nothing saved."
✅ Hourly collection completed
❌ Dataset 3 failed: object 'hourly_files' not found 


=== Job Completion ===
Exit code: 1
Completed at: Wed Aug 27 20:45:47 CEST 2025
❌ Four-dataset collection failed with exit code 1
Check the log file for details
